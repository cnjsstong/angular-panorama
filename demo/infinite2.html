<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=620, user-scalable=no">
    <link href='http://fonts.googleapis.com/css?family=Droid+Sans:400,700' rel='stylesheet' type='text/css'>
    <style>
    html, body { 
      height:100%; 
      padding:0;
      margin:0;
    }
    body {
      margin: 0;
      background: #333;
      color:white;
      padding: 0px;
      height:100%; 
    }
    * {
      font-family: 'Droid Sans', sans-serif;
    }
    ul li {
      list-style-type: none
    }
    ul.basic {
      width:100%;
      height:100%;
    }
    ul.basic li {
      text-align:center;
      padding-top:80px;
      font-size: 22px;
    }
    .ng-panorama-container {
      height:100%;
    }
    </style>
  </head>
  <body ng-app="myApp" ng-controller='demoController'>
    <a href="https://github.com/revolunet/angular-panorama"><img style="z-index:100;position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>

    <div ng-panorama-infinite ng-panorama-current="page" ng-panorama-buffered ng-panorama-next="getSlide(item, 1)" ng-panorama-prev="getSlide(item, -1)" class="basic">
      <div style="background-color:{{ page.bg }};">
        Infinite angular-panorama demo<br><br>
        <h3 ng-bind="page.date|date"></h3>
        <br><br><br>
        <h5 ng-bind="'index: ' + panoramaCollection.index"></h5>
        <h5 ng-bind="'position: ' + panoramaCollection.position"></h5>
        <h5 ng-bind="'#items: ' + panoramaCollection.items.length"></h5>
        <h5 ng-bind="'#DOM items: ' + panoramaCollection.cards.length"></h5>
      </div>
    </div>

    <script src="../bower_components/angular/angular.js"></script>
    <!-- <script src="../components/angular/angular.js"></script> -->

    <!-- include panorama src -->
    <script src="../dist/angular-panorama.js"></script>
    <link href='../dist/angular-panorama.min.css' rel='stylesheet' type='text/css'>

    <script>
    /* demo page code */
    angular.module('myApp', ['angular-panorama'])
      .controller('demoController', function($scope, $http, $q, $timeout) {
       
        // infinite panorama stuff
        var currentDay = (new Date()),
            colors = ['#339966', '#336699', '#cc9933', '#cc6633', '#cc3366', '#66cc33'],
            colorIndex = 0;

        function getColor() {
          return colors[colorIndex++ % colors.length];
        }

        function addPage() {
          // generate a single page, with color and a new date
          currentDay = new Date(currentDay.getTime() + 86400000);
          return {
            bg: getColor(),
            date: currentDay
          };
          
        }

        // add some initial pages
      //  $scope.pages = [addPage()];
        //$scope.pages.push(addPage());
        // $scope.pages.push(addPage());
        // $scope.pages.push(addPage());
        // $scope.pages.push(addPage());
        // $scope.pages.push(addPage());

        $scope.page = addPage();

        $scope.getSlide = function(item, direction) {
          // generate a new slide
          var nextDate = new Date();
          nextDate.setTime(item.date.getTime() + (direction*86400000));
          var item = {
            bg: getColor(),
            date: nextDate
          };

         //return item;

          // sample promise
          var defer = $q.defer();

          $timeout(function() {
              defer.resolve(item);
          });
          return defer;
        };

      })

    </script>
  </body>
</html>
